<% specs.each(function(spec) { %>
  <div class="spec" <%= (el) -> can.data(el, 'spec', spec) %> >
    <img src=<%== 'images/'+spec.attr('icon') %> /><a class="expandOn"><h4><%= spec.name %></h4></a>
    <div>
      <ul><li><a class="expandOff">Settings</a>
      <div class="settings">
      <%== can.view.render(['js/app/view/specs',spec.name,'.ejs'].join(''), {spec: spec}) %>
      </div></li>
      <li><a class="expandOff">Stats</a>
      <div class="stats">
        <label>Intellect</label><input type="input" id="int" value="<%= spec.attr('int'); %>" readonly />
        <label>Crit Percent</label><input type="input" id="crit" value="<%= spec.attr('crit'); %>" readonly />
        <label>Haste Percent</label><input type="input" id="haste" value="<%= spec.attr('haste'); %>" readonly />
        <label>Mastery Percent</label><input type="input" id="mast" value="<%= spec.attr('mast'); %>" readonly />
        <label>Spellpower</label><input type="input" id="sp" value="<%= spec.attr('sp'); %>" readonly />
      </div></li>
      <li><a class="expandOff">Haste Points</a>
        <div <%= (el) -> can.data(el, 'spec', spec) %> class="haste_bar_cont" id="haste_bar_<%= spec.attr('name'); %>" >
        </div></li>
      <li><a class="expandOff">Mana Regen</a>
        <div class="mana_regen">
          <label>Time duration</label><input type="input", name="interval_time" value="<%=spec.attr('interval_time'); %>" />
          <table>
            <thead>
            <tr><th>Source</th><th>MPS</th><th>Mana</th></tr>
            </thead>
            <tbody>
              <% spec.mana_sources.each(function(source) { %>
                <tr><td><%= source.name %></td><td><%= source.attr('mps') %></td><td><%= source.attr('mana') %></td></tr>
              <% }) %>
              <tr class="total"><td>Total</td><td><%= spec.attr('regen_mps') %></td><td><%= spec.attr('regen_mana') %></td>
            </tbody>
          </table>
        </div></li>
      </ul>
    </div>
  </div>
<% }) %>